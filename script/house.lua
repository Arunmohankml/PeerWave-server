houseinfo = {
{2000000+500000, {-1249.48975, 1548.9707, 30.89815, 92.4977188110352}, {-1234.6698, 1541.40576, 25.20967, 178.10466003418}, 3+4, {-1246.48767, 1538.85791, 25.93989, 359.187866210938, 960532882}, {-1246.56836, 1540.36475, 26.06884, 176.825180053711, 1414234331}},
{1800000+500000, {-1009.28711, 1225.31824, 28.42268, 178.694030761719}, {-988.4007, 1241.39136, 24.06977, 269.61328125}, 1+4, {-1000.25928, 1223.36658, 28.42276, 90.8783111572266, -1439643044}, {-1001.89398, 1223.31018, 28.4267, 269.299652099609, 1763604455}},
{2000000+500000, {-969.32843, 891.87415, 19.00632, 177.153396606445}, {-966.23181, 901.31323, 13.58926, 268.219177246094}, 3+4, {-969.42859, 883.17841, 18.82389, 357.810852050781, 108206619}, {-969.47375, 884.646, 19.00632, 178.555587768555, -1733689524}},
{3000000+500000, {-432.73627, 1461.02502, 38.97145, 264.433135986328}, {-421.51892, 1492.65063, 18.7791, 267.330718994141}, 7+4, {-429.36295, 1474.40405, 20.15733, 90.2848052978516, -1180793541}, {-426.2684, 1467.52307, 38.96716, 90.2848052978516, 2038115784}},
{3000000+500000, {-127.62131, 1495.37952, 22.78276, 323.741180419922}, {-116.62468, 1493.01892, 18.46153, 223.160705566406}, 3+4, {-126.08469, 1501.04639, 22.78255, 127.114639282227, -1777119207}, {-127.13207, 1499.91809, 22.78254, 312.681640625, -2086630311}},
{3400000+500000, {105.11219, 844.96503, 45.06986, 269.629638671875}, {119.02437, 845.48907, 14.6246, 178.315078735352}, 8+4, {97.32462, 840.96594, 15.79245, 194.327896118164, 0}, {96.28168, 851.79089, 45.05098, 194.327896118164, 1607265536}},
{5000000+500000, {-183.37979, 578.56348, 122.78415, 357.192504882813}, {-164.23315, 617.08063, 14.73571, 86.8681716918945}, 13+4, {-184.02568, 597.3703, 15.34176, 104.573318481445, -1308665250}, {-156.92206, 592.37042, 118.71754, 269.472381591797, 821768432}},
{3000000+500000, {602.80206, 1411.46582, 17.48467, 270.080230712891}, {589.51532, 1400.00146, 10.85497, 359.289855957031}, 3+4, {603.08765, 1403.83118, 17.47932, 358.139862060547, 1113953995}, {602.99805, 1405.37695, 17.49583, 167.019058227539, -443909872}},
{1800000+500000, {567.10956, 1391.04236, 30.86005, 82.4105453491211}, {581.09314, 1402.42444, 10.90875, 178.267669677734}, 1+4, {561.11896, 1391.49902, 30.85655, 268.489929199219, 1949746107}, {562.72272, 1391.55273, 30.86004, 85.2159118652344, -2138044267}},
{1000000+500000, {1363.62842, 525.15051, 33.11604, 269.781311035156}, {1398.19922, 529.90259, 28.972, 188.788970947266}, 3+4, {1383.72791, 529.98547, 33.1196, 89.3317489624023, 1607265536}, {1382.13733, 529.9151, 33.11746, 268.893768310547, 1616969558}},
{150000+500000, {878.41827, -15.27376, 28.44133, 97.5186767578125}, {893.28735, -34.31548, 27.33641, 179.93879699707}, 1+4, {881.05823, -20.56054, 28.42694, 89.4306335449219, 359713120}, {879.36108, -20.65961, 28.42704, 268.32373046875, 359713120}},
{1800000+500000, {1369.64294, 217.04591, 35.68861, 351.688659667969}, {1367.44116, 187.34341, 27.17358, 89.334098815918}, 3+4, {1366.56189, 190.25812, 27.21727, 356.663879394531, -1225121406}, {1366.55518, 192.86409, 27.68436, 180.07063293457, 305965194}},
{1700000+500000, {892.62335, -494.77954, 19.43723, 90.9429702758789}, {903.84229, -497.33853, 15.10181, 179.185241699219}, 5+4, {892.60205, -502.42892, 19.40679, 358.22265625, -1716021247}, {892.56555, -500.73761, 19.40732, 178.831893920898, -1575248978}},
{1900000+500000, {857.47766, -512.59338, 16.28271, 177.329452514648}, {842.9953, -517.17694, 14.01474, 357.399383544922}, 5+4, {849.85559, -518.62952, 16.29361, 267.305419921875, -391071229}, {851.69049, -518.52179, 16.29048, 90.8835830688477, -1003789974}},
--{1000000, {-15.34916, 780.75189, 66.21265, 359.271759033203}, {-39.45435, 792.15686, 14.65837, 358.755279541016}, 18+4},
--{400000, {-69.58076, -209.3956, 32.81075, 89.0550079345703}, {-74.2261, -229.80818, 14.57308, 88.5242156982422}, 13+4},
--{140000, {-1446.8905, 497.13519, 22.90181, 187.563507080078}, {-1474.29541, 490.7373, 19.47624, 358.341217041016}, 5+4},
--{200000, {-430.81015, 1395.45227, 16.46197, 92.7748107910156}, {-449.57709, 1389.73108, 15.40304, 358.742584228516}, 7+4},
--{140000, {1599.69983, 566.98462, 30.80721, 18.6751174926758}, {1575.15198, 568.06543, 28.93663, 358.111236572266}, 5+4},
--{100000, {-1953.79919, -74.90328, 11.37589, 350.419250488281}, {-1950.28174, -86.82784, 6.5897, 90.2191543579102}, 3+4},
{2400000+500000, {-548.90228, 1235.46301, 97.58067, 257.567230224609}, {-519.763, 1252.07397, 17.49931, 169.46142578125}, 5+4, {-547.19025, 1250.48499, 97.5396, 168.322830200195, 844387025}, {-547.33325, 1248.94263, 97.53963, 348.454742431641, -586143158}},
{1400000+500000, {-138.09778, 1383.15088, 32.8019, 176.576690673828}, {-146.93506, 1382.64307, 20.36282, 359.059143066406}, 2+4, {-132.37166, 1381.0896, 32.80193, 203.918685913086, 746881053}, {-132.35594, 1379.49695, 32.8019, 203.918685913086, -212505156}}
}
local houseblip = {}
houses = {}
for i=1,#houseinfo,1 do
	houses[i] = "0"
end

RegisterNetEvent('updHouses')
AddEventHandler('updHouses', function(data)
	for i=1,#houseinfo,1 do
		if(data[i] == nil) then
			data[i] = "0"
		end
		houses[i] = tostring(data[i])
	end
end)

SaveHouses = function()
	local data = {}
	for i=1,#houses,1 do
		data[i] = houses[i]
	end
	TriggerServerEvent('saveHouses', data)
end

housecash = {}
for i=1,#houseinfo,1 do
	housecash[i] = 0
end
RegisterNetEvent('updHouseCash')
AddEventHandler('updHouseCash', function(name, id, value)
	if(GetPlayerName(GetPlayerId()) == name) then
		housecash[id] = value
		if(housecash[id] <= 3) then
			Notify("House #" .. id .. " service payment has been increased to " .. math.floor(houseinfo[id][1]/100*housecash[id]) .. "$. You can pay it at the nearest ATM.")
		else
			Notify("Your House #" .. id .. " has been removed from you due to too high house service debt.")
		end
	end
end)
RegisterNetEvent('updHouseCash2')
AddEventHandler('updHouseCash2', function(data)
	for i=1,#houseinfo,1 do
		if(data[i] == nil) then
			data[i] = 0
		end
		housecash[i] = tonumber(data[i])
	end
end)

SaveHouseCash = function()
	local data = {}
	for i=1,#housecash,1 do
		data[i] = housecash[i]
	end
	TriggerServerEvent('saveHouseCash', data)
end

local outfits = {}
RegisterNetEvent('updOutfits')
AddEventHandler('updOutfits', function(data)
	for i=1,#data,1 do
		outfits[i] = {}
		for j=1,#data[i],1 do
			--if(j ~= 1) then
				outfits[i][j] = tonumber(data[i][j])
			--end
		end
	end
end)
SaveOutfits = function()
	local data = {}
	for i=1,#outfits,1 do
		data[i] = outfits[i]
	end
	TriggerServerEvent('saveOutfits', data)
end

local tps = {
{{-542.66107, 1256.78076, 17.54516, 78.2621154785156, -37770771}, {-542.67694, 1256.85364, 97.53957, 78.2621154785156, -402871496}}

--[[{{-429.3829, 1474.45105, 20.15734, 264.607788085938}, {-426.2684, 1467.52307, 38.96716, 177.701553344727}},
{{97.3325, 840.97095, 15.79246, 179.197265625}, {96.28168, 851.79089, 45.05099, 270.314331054688}},
{{-184.02568, 597.3703, 15.34177, 269.438262939453}, {-184.15724, 597.37561, 114.44452, 269.975769042969}},
{{211.69096, -206.73399, 10.75592, 203.194732666016}, {214.4516, -200.84976, 53.90819, 24.505298614502}},
{{-29.58179, 792.60193, 14.95882, 269.121063232422}, {-9.89077, 797.75171, 62.80701, 359.216857910156}},
{{-74.54211, -223.26233, 14.62667, 180.804458618164}, {-72.29755, -199.12674, 32.81074, 89.4780120849609}},
{{-1462.35901, 490.82028, 20.40515, 89.6220474243164}, {-1452.04614, 490.16425, 22.89349, 268.436584472656}},
{{-542.67694, 1256.85364, 97.53958, 80.3351516723633}, {-542.66107, 1256.78076, 17.54518, 78.9661102294922}},
{{-132.37166, 1381.0896, 32.80192, 178.877883911133}, {-132.35594, 1379.49695, 32.80189, 178.550170898438}},
{{-70.45285, 56.6353, 14.76831, 91.1682510375977}, {-72.01129, 56.58701, 14.767, 89.4574432373047}},
{{-81.69284, 57.98582, 14.99217, 87.7236709594727}, {-85.80848, 62.6665, 19.62852, 266.988494873047}}]]

--[[{{-406.60873, 282.16464, 13.24742, 1.05912756919861, 0}, {-406.65707, 283.93036, 13.6847, 178.888214111328, -1838066691}},
{{408.6022, 1477.09155, 12.29108, 54.2676467895508, 0}, {407.3291, 1477.91553, 12.35089, 51.7863540649414, 755607079}},
{{-1083.07227, -352.17911, 3.41661, 181.225677490234, 0}, {-1090.25183, -356.0657, 7.40391, 269.021118164063, -1852186916}}]]
}
CreateThread(function()
	while true do
		Wait(0)
		for i=1,#tps,1 do
			for j=1,2,1 do
				DrawCheckpointWithDist(tps[i][j][1], tps[i][j][2], tps[i][j][3]-1, 1.1, 255, 3, 30, 100)
				if(IsPlayerNearCoords(tps[i][j][1], tps[i][j][2], tps[i][j][3], 1)) then
					PrintStringWithLiteralStringNow("STRING", "Press ~y~E ~w~to ~y~use", 1000, 1)
					if(IsGameKeyboardKeyJustPressed(18)) then
						if(j == 1) then
							SetCharCoordinates(GetPlayerChar(-1), tps[i][2][1], tps[i][2][2], tps[i][2][3]-1)
							--SetCharHeading(GetPlayerChar(-1), tps[i][2][4])
						else
							SetCharCoordinates(GetPlayerChar(-1), tps[i][1][1], tps[i][1][2], tps[i][1][3]-1)
							--SetCharHeading(GetPlayerChar(-1), tps[i][1][4])
						end
						break
					end
				end
			end
		end
	end
end)

RegisterNetEvent('askToEnter')
AddEventHandler('askToEnter', function(target, requester, hid)
	if(ConvertIntToPlayerindex(target) == ConvertIntToPlayerindex(GetPlayerId())) then
		CreateThread(function()
			DrawWindow("" .. GetPlayerName(requester) .. " wants to enter your house", {"Let in"})
			while menuactive do
				Wait(0)
			end
			if(menuresult > 0) then
				TriggerServerEvent('setPlayerPos', requester, houseinfo[hid][6][1], houseinfo[hid][6][2], houseinfo[hid][6][3]-1, 0.0)
			else
				TriggerServerEvent('sendMessageToPlayer', requester, "You were not allowed to enter this house.")
			end
		end)
	end
end)

local doors = {
{"cj_gate_dock", -1246.46008300781, 1539.53076171875, 26.138011932373, 0.0829162672162056, 0},
{"cj_gate_dock", -1246.59997558594, 1539.92138671875, 26.2721557617188, 180.182159423828, 1414234331},
{"cj_gate_dock", -1000.9013671875, 1223.3779296875, 28.7261486053467, 90.1337966918945, -1439643044},
{"cj_gate_dock", -1001.23260498047, 1223.31774902344, 28.741455078125, 269.966857910156, 1763604455},
{"cj_gate_dock", -969.416259765625, 883.678283691406, 19.5758800506592, 358.366760253906, 0},
{"cj_gate_dock", -969.439147949219, 884.178833007813, 19.7596206665039, 179.849273681641, 0},
{"cj_gate_dock", -126.374038696289, 1500.685546875, 23.185863494873, 134.796188354492, 0},
{"cj_gate_dock", -126.662818908691, 1500.40502929688, 23.186206817627, 315.352264404297, 0},
{"cj_gate_dock", -155.521224975586, 592.487365722656, 119.470832824707, 90.3884887695313, 0},
{"cj_gate_dock", -156.140151977539, 592.382629394531, 119.470802307129, 269.700042724609, 0},
{"cj_gate_dock", 603.0908203125, 1404.31884765625, 18.2326202392578, 0.445734024047852, 0},
{"cj_gate_dock", 603.010314941406, 1404.923828125, 18.2491245269775, 179.725250244141, 0},
{"cj_gate_dock", 561.651000976563, 1391.48767089844, 30.8098564147949, 268.970428466797, 0},
{"cj_gate_dock", 562.200439453125, 1391.53845214844, 31.6133346557617, 89.3041305541992, 0},
{"cj_gate_dock", 1383.095703125, 529.941345214844, 33.4729156494141, 90.0340423583984, 0},
{"cj_gate_dock", 1382.66357421875, 529.975280761719, 33.8707733154297, 270.978759765625, 0},
{"cj_gate_dock", 880.312072753906, -20.5883522033691, 28.8302402496338, 90.1353225708008, 0},
{"cj_gate_dock", 880.058166503906, -20.5637989044189, 28.8809299468994, 268.701232910156, 0},
{"cj_gate_dock", 1367.17248535156, 191.77685546875, 27.9676837921143, 359.356292724609, 0},
{"cj_gate_dock", 1367.87512207031, 192.202819824219, 27.987663269043, 180.427169799805, 305965194},
{"cj_gate_dock", 892.598205566406, -501.933715820313, 20.1599826812744, 359.608734130859, 0},
{"cj_gate_dock", 892.537231445313, -501.240692138672, 20.1606254577637, 179.186614990234, 0},
{"cj_gate_dock", 850.566772460938, -518.571960449219, 16.4969120025635, 269.553283691406, 0},
{"cj_gate_dock", 850.879577636719, -518.583801269531, 16.793773651123, 90.2127685546875, -1003789974},
{"cj_gate_dock", 865.737121582031, -518.534851074219, 16.2864151000977, 90.0613632202148, 0},
{"cj_gate_dock", 865.458435058594, -518.619323730469, 17.0437679290771, 269.781524658203, 0},
{"cj_gate_dock", -547.325500488281, 1249.80151367188, 97.8428802490234, 169.830184936523, 0},
{"cj_gate_dock", -547.255981445313, 1249.53393554688, 97.842887878418, 350.05859375, -586143158},
}
local objs = {}
CreateThread(function()
	while true do
		Wait(0)
		for i=1,#doors,1 do
			if(not DoesObjectExist(objs[i])) then
				objs[i] = SpawnObject(GetHashKey(doors[i][1]), doors[i][2], doors[i][3], doors[i][4], doors[i][5])
				SetObjectVisible(objs[i], false)
				SetObjectStopCloning(objs[i], true)
			end
		end
	end
end)

CreateThread(function()
	while true do
		Wait(0)
		for i=1,#houseinfo,1 do
			if(not DoesBlipExist(houseblip[i])) then
				houseblip[i] = AddBlipForCoord(houseinfo[i][2][1], houseinfo[i][2][2], houseinfo[i][2][3], _i)
				ChangeBlipSprite(houseblip[i], 29)
				ChangeBlipScale(houseblip[i], 0.7)
				ChangeBlipNameFromAscii(houseblip[i], "House #" .. i)
				SetBlipAsShortRange(houseblip[i], true)
			end
			local owner = "None"
			if(houses[i] ~= "0") then
				owner = houses[i]
			end
			
			DrawCheckpointWithDist(houseinfo[i][5][1], houseinfo[i][5][2], houseinfo[i][5][3]-1, 1.1, 255, 3, 30, 100)
			DrawTextAtCoord(houseinfo[i][5][1], houseinfo[i][5][2], houseinfo[i][5][3], "House_#" .. i .. " Owner:_" .. owner, 20)
			if(IsPlayerNearCoords(houseinfo[i][5][1], houseinfo[i][5][2], houseinfo[i][5][3], 1)) then
				if(houses[i]=="0" or houses[i]==GetPlayerName(GetPlayerId())) then
					PrintText("Press ~y~E ~w~to enter", 1)
					if(IsGameKeyboardKeyJustPressed(18)) then
						SetCharCoordinates(GetPlayerChar(-1), houseinfo[i][6][1], houseinfo[i][6][2], houseinfo[i][6][3]-1)
						goto out
					end
				else
					PrintText("Press ~y~E ~w~to knock", 1)
					if(IsGameKeyboardKeyJustPressed(18)) then
						if(IsNetworkPlayerActive(GetPlayerIdFromName(houses[i]))) then
							if(IsPlayerNearCoords(houseinfo[i][2][1], houseinfo[i][2][2], houseinfo[i][2][3], 50, GetPlayerIdFromName(houses[i]))) then
								TriggerServerEvent('askToEnter', GetPlayerIdFromName(houses[i]), ConvertIntToPlayerindex(GetPlayerId()), i)
								Notify("Request sent. Please wait...")
							else
								Notify("No response.")
							end
						else
							Notify("No response.")
						end
					end
				end
			end
			DrawCheckpointWithDist(houseinfo[i][6][1], houseinfo[i][6][2], houseinfo[i][6][3]-1, 1.1, 255, 3, 30, 100)
			if(IsPlayerNearCoords(houseinfo[i][6][1], houseinfo[i][6][2], houseinfo[i][6][3], 1)) then
				PrintText("Press ~y~E ~w~to leave", 1)
				if(IsGameKeyboardKeyJustPressed(18)) then
					SetCharCoordinates(GetPlayerChar(-1), houseinfo[i][5][1], houseinfo[i][5][2], houseinfo[i][5][3]-1)
				end
			end
			::out::
			
			DrawTextAtCoord(houseinfo[i][2][1], houseinfo[i][2][2], houseinfo[i][2][3], "House_#" .. i .. " Owner:_" .. owner .. " Price:_" .. houseinfo[i][1] .. "$ Garage_places:_" .. houseinfo[i][4], 20)
			if(houses[i] == "0") then
				ChangeBlipColour(houseblip[i], 0)
				DrawCheckpointWithDist(houseinfo[i][2][1], houseinfo[i][2][2], houseinfo[i][2][3]-1, 1.1, 255, 255, 255, 100)
			elseif(houses[i] == GetPlayerName(GetPlayerId())) then
				ChangeBlipColour(houseblip[i], 2)
				DrawCheckpointWithDist(houseinfo[i][2][1], houseinfo[i][2][2], houseinfo[i][2][3]-1, 1.1, 0, 255, 0, 100)
			else
				ChangeBlipColour(houseblip[i], 1)
				DrawCheckpointWithDist(houseinfo[i][2][1], houseinfo[i][2][2], houseinfo[i][2][3]-1, 1.1, 255, 0, 0, 100)
			end
			--DrawCheckpointWithDist(houseinfo[i][2][1], houseinfo[i][2][2], houseinfo[i][2][3]-1, 1.1, 255, 3, 30, 100)
			if(IsPlayerNearCoords(houseinfo[i][2][1], houseinfo[i][2][2], houseinfo[i][2][3], 1)) then
				if(houses[i] == "0") then
					PrintStringWithLiteralStringNow("STRING", "Press ~y~E ~w~to purchase ~y~this house ~w~for ~g~" .. houseinfo[i][1] .. "$", 1000, 1)
					if(IsGameKeyboardKeyJustPressed(18)) then
						if(inventory[34] >= houseinfo[i][1]) then
							RemoveItem(34, houseinfo[i][1])
							SaveStats()
							houses[i] = GetPlayerName(GetPlayerId())
							SaveHouses()
							Notify("House purchased.")
						else
							Notify("You do not have enough money.")
						end
					end
				elseif(houses[i] == GetPlayerName(GetPlayerId())) then
					PrintText("Press ~y~E ~w~to ~y~open house menu", 1)
					if(IsGameKeyboardKeyJustPressed(18)) then
						::main::
						local tempitems = {}
						tempitems[#tempitems+1] = "Garage"
						tempitems[#tempitems+1] = "Wardrobe"
						tempitems[#tempitems+1] = "Sell house"
						DrawWindow("House_#" .. i, tempitems)
						while menuactive do
							Wait(0)
						end
						if(menuresult > 0) then
							if(tempitems[menuresult] == "Garage") then
								::garage::
								local tempitems = {}
								local tempids = {}
								for j=1,#carinfo,1 do
									if(cars[j] == 1) then
										tempitems[#tempitems+1] = carinfo[j][1]
										tempids[#tempids+1] = j
									end
								end
								DrawWindow("Garage", tempitems)
								while menuactive do
									Wait(0)
								end
								if(menuresult > 0) then
									local tempcarid = tempids[menuresult]
									local tempresult = menuresult
									::caroption::
									DrawWindow("" .. tempitems[tempresult], {"Spawn", "Sell ~y~(" .. math.floor(carinfo[tempcarid][2]/2) .. "$)"})
									while menuactive do
										Wait(0)
									end
									if(menuresult > 0) then
										if(menuresult == 1) then
											DeleteCar(car)
											car = SpawnCar(carinfo[tempids[menuresult]][3], houseinfo[i][3][1], houseinfo[i][3][2], houseinfo[i][3][3], houseinfo[i][3][4])
											--AllowVeh(car)
											SetVehicleTuning(car)
											Notify("Vehicle spawned near your house.")
										elseif(menuresult == 2) then
											local tempprice = math.floor(carinfo[tempcarid][2]/2)
											DrawWindow("Are you sure?", {"Sell vehicle for ~g~" .. tempprice .. "$"})
											while menuactive do
												Wait(0)
											end
											if(menuresult == 1) then
												AddItem(34, tempprice)
							
												SaveStats()
												cars[tempcarid] = 0
												SaveCars()
												Notify("Vehicle sold (+" .. tempprice .. "$).")
											else
												goto caroption
											end
										end
									else
										goto garage
									end
								else
									goto main
								end
							elseif(tempitems[menuresult] == "Wardrobe") then
								::wardrobe::
								local tempitems = {}
								tempitems[#tempitems+1] = "Saved outfits"
								tempitems[#tempitems+1] = "Save current outfit"
								DrawWindow("Wardrobe", tempitems)
								while menuactive do
									Wait(0)
								end
								if(menuresult > 0) then
									if(tempitems[menuresult] == "Saved outfits") then
										::outfits::
										local tempitems = {}
										for j=1,#outfits,1 do
											tempitems[j] = "Outfit " .. j
										end
										DrawWindow("Saved_outfits", tempitems)
										while menuactive do
											Wait(0)
										end
										if(menuresult > 0) then
											local sel = menuresult
											local tempitems = {}
											tempitems[#tempitems+1] = "Wear"
											tempitems[#tempitems+1] = "Delete"
											DrawWindow("Outfit_" .. sel, tempitems)
											while menuactive do
												Wait(0)
											end
											if(menuresult > 0) then
												if(tempitems[menuresult] == "Wear") then
													for j=1,#outfits[sel],1 do
														currparts[j] = outfits[sel][j]
													end
													SaveParts()
													for i=1,9,1 do
														if(i == 1) then
															local model = currparts[1]
															RequestModel(model)
															while not HasModelLoaded(model) do
																Wait(0)
																RequestModel(model)
															end
															ChangePlayerModel(GetPlayerId(), model)
															--MarkModelAsNoLongerNeeded(model)
														elseif(i>=2 and i<=8) then
															SetCharComponentVariation(GetPlayerChar(-1), bodyparts2[i-1], currparts[i], currparts[i+7])
														else
															SetCharPropIndex(GetPlayerChar(-1), 0, currparts[16])
															SetCharPropIndex(GetPlayerChar(-1), 1, currparts[17])
														end
													end
													SetRoomForCharByKey(GetPlayerChar(-1), GetKeyForViewportInRoom(GetGameViewportId()))

												elseif(tempitems[menuresult] == "Delete") then
													local newoutfits = {}
													for i=1,#outfits,1 do
														if(i ~= sel) then
															table.insert(newoutfits, outfits[i])
														end
													end
													outfits = newoutfits
													SaveOutfits()
													Notify('Outfit deleted.')
												end
											else
												goto outfits
											end
										else
											goto wardrobe
										end
									elseif(tempitems[menuresult] == "Save current outfit") then
										local tempoutfit = {}
										for i=1,#currparts,1 do
											tempoutfit[i] = currparts[i]
										end
										outfits[#outfits+1] = tempoutfit
										SaveOutfits()
										Notify('Outfit saved.')
									end
								end
							elseif(tempitems[menuresult] == "Sell house") then
								if(housecash[i] == 0) then
									local tempprice = math.floor(houseinfo[i][1]/2)
									DrawWindow("Are you sure?", {"Sell house for ~g~" .. tempprice .. "$"})
									while menuactive do
										Wait(0)
									end
									if(menuresult == 1) then
										AddItem(34, tempprice)
							
										SaveStats()
										houses[i] = "0"
										SaveHouses()
										Notify("House sold (+" .. tempprice .. "$).")
									else
										goto main
									end
								else
									Notify("You have to pay all house service debts before selling.")
								end
							end
						end
					end
				end
			end
		end
	end
end)